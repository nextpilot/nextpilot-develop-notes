# 固定翼调参



## 基本调参

### 基本参数设置

设置一个基本的飞行参数，主要包括：

- 巡航速度：
- 失速速度：

### 飞行测试

- FW_T_CLMB_MAX：最大爬升速度，油门最大时保持巡航速度条件下能达到的最大爬升速度。可以在盘旋模式、指点飞行模式下给定一个较大的高度差，让无人机一直爬升，如果巡航速度保持不变，油门未达到最大油门，那么就可以增加FW_T_CLMB_MAX，如果已经达到最大油门而无人机速度降低了，则减小FW_T_CLMB_MAX。
- FW_T_SINK_MIN：最小下沉速度，油门最小时保持巡航速度条件下能达到的最大下沉速度。

## 总能量调参

飞行一圈后，根据日志分析，修改参数

- FW_THR_CRUISE：巡航油门，应该是巡航速度下的平均油门量，可以对应于日志中`actuator_control_1.control.03`消息



FW_THR_CRUISE

FW_T_VERT_ACC



## 参数汇总

| 参数            | 说明                                                         | 备注                                 |
| --------------- | ------------------------------------------------------------ | ------------------------------------ |
| FW_THR_CRUISE   | 巡航油门<br>计算油门的第一步是在巡航油门基础上               | 巡航速度下的油门值，通过飞行数据估计 |
| FW_PSP_OFF      | 俯仰设定配平值<br>Pitch setpoint offset (pitch at level flight) | 一般等于正常速度巡航时无人机俯仰角度 |
| FW_T_SPDWEIGHT  | 越大说明控制时速度比重越大，高度比重越小<br>speed<->height，默认为1 | 当没有空速计时，该值必须设置为0      |
|                 |                                                              |                                      |
| FW_T_THR_DAMP   | 总能量变化率误差到油门的P增益，默认0.1                       | 用于计算油门                         |
| FW_T_I_GAIN_THR | 总能量变化率误差到油门的I增益，默认0.3                       | 用于计算油门                         |
|                 |                                                              |                                      |
| FW_T_PTCH_DAMP  | 平衡能量变化率误差到俯仰的P增益，默认0.1                     |                                      |
| FW_T_I_GAIN_PIT | 平衡能量变化率误差到俯仰的I增益，默认0.1                     | 用于限制俯仰角                       |
| FW_T_VERT_ACC   | 垂直方向最大加速度，默认7m/s²                                | 用于限制俯仰角                       |
|                 |                                                              |                                      |
| FW_THR_SLEW_MAX | 油门最大变化率（油门增长斜率），等同于油门从最小增加到最大的时间，在实际控制时，油门变化不能超过该变化率 |                                      |
| FW_T_CLMB_MAX   | 油门最大时（THR_MAX），保持巡航速度前提下，无人机拉升过程中的垂直方向爬升速度 |                                      |
| FW_T_SINK_MIN   | 油门最小时（THR_MIN），保持巡航速度前提下，无人机俯冲过程中的垂直方向下沉速度 |                                      |
| FW_T_CLMB_R_SP  | 自动模式下（且没指定期望爬升速度时）无人机改变高度时的垂直方向默认下沉速度；手动模式下最大爬升速度 | 用于设置期望天向速度                 |
| FW_T_SINK_R_SP  | 自动模式下（且没指定期望爬升速度时）无人机改变高度时的垂直方向默认下沉速度；手动模式下最大下沉速度 | 用于设置期望天向速度                 |
|                 |                                                              |                                      |
| FW_T_ALT_TC     | 高度差到天向速度P增益，默认2                                 | 用于设置期望天向速度                 |
| FW_T_HRATE_FF   | 高度差到天向速度前馈增益，默认0.3                            | 用于设置期望天向速度                 |






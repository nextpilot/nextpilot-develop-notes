<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 754 1067" height="1067" xmlns:xlink="http://www.w3.org/1999/xlink" width="754"><defs/><g transform="translate(-535.52,-1108.20)"><g id="shape1" transform="translate(1024.520000,1322.201000)"><path d="M213.0,55.5L213.0,7.0C213.0,3.1,209.9,.0,206.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,55.5C.0,59.4,3.1,62.5,7.0,62.5L206.0,62.5C209.9,62.5,213.0,59.4,213.0,55.5z" stroke-width="1" fill-rule="nonzero" fill="#fdc55b" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="67.5" y="27.3">处理控制指令</tspan><tspan x="48.0" y="46.3">handle_command()</tspan></text></g><g id="shape2" transform="translate(536.520000,1412.701000)"><path d="M388.0,85.0L388.0,7.0C388.0,3.1,384.9,.0,381.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L381.0,92.0C384.9,92.0,388.0,88.9,388.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#fdc55b" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="149.0" y="42.0">set_nav_state()</tspan><tspan x="31.5" y="61.0">切换导航状态至NAVIGATION_STATE_AUTO_TAKEOFF</tspan></text></g><g id="shape3" transform="translate(1024.520000,1670.701000)"><path d="M213.0,85.0L213.0,7.0C213.0,3.1,209.9,.0,206.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L206.0,92.0C209.9,92.0,213.0,88.9,213.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#fdc55b" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="23.5" y="42.0">发布ORB_ID(vehicle_status)</tspan><tspan x="21.0" y="61.0">_status_pub.publish(_status)</tspan></text></g><g id="shape4" transform="translate(730.520000,1201.201000)"><path stroke-dasharray="11,5,2.5,5" stroke-width="1" d="M.0,.0L.0,39.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,39.0L.0,45.0L-3.0,39.0L3.0,39.0" fill="#191919" stroke="#191919"/></g><g id="shape5" transform="translate(933.520000,1838.201000)"><path d="M355.0,180.0L355.0,7.0C355.0,3.1,351.9,.0,348.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,180.0C.0,183.9,3.1,187.0,7.0,187.0L348.0,187.0C351.9,187.0,355.0,183.9,355.0,180.0z" stroke-width="1" fill-rule="nonzero" fill="#fdc55b" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="125.5" y="32.5">检测是否完成起飞</tspan><tspan x="4.0" y="51.5">if (_armed.armed &amp;&amp;</tspan><tspan x="4.0" y="70.5">    !_land_detector.landed </tspan><tspan x="4.0" y="89.5">   &amp;&amp; (_status.nav_state == </tspan><tspan x="4.0" y="108.5">vehicle_status_s::NAVIGATION_STATE_AUTO_TAKEOFF) </tspan><tspan x="4.0" y="127.5">   &amp;&amp; (mission_result.timestamp >= </tspan><tspan x="4.0" y="146.5">_status.nav_state_timestamp) </tspan><tspan x="4.0" y="165.5">   &amp;&amp; mission_result.finished)</tspan></text></g><g id="shape6" transform="translate(536.520000,1719.701000)"><path d="M388.0,85.0L388.0,7.0C388.0,3.1,384.9,.0,381.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L381.0,92.0C384.9,92.0,388.0,88.9,388.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#fdc55b" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="106.0" y="42.0">判断mission执行结果是否更新</tspan><tspan x="103.0" y="61.0">_mission_result_sub.updated()</tspan></text></g><g id="shape7" transform="translate(924.520000,1765.701000)"><path stroke-width="1" d="M.0,.0C37.5,-0.1,74.9,-0.1,106.1,4.7C137.2,9.5,162.1,19.2,174.4,31.3C185.2,41.9,186.5,54.4,186.5,67.1" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M189.5,66.5L186.5,72.5L183.5,66.5L189.5,66.5" fill="#191919" stroke="#191919"/></g><g id="shape8" transform="translate(933.520000,2062.701000)"><path d="M355.0,104.0L355.0,7.0C355.0,3.1,351.9,.0,348.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,104.0C.0,107.9,3.1,111.0,7.0,111.0L348.0,111.0C351.9,111.0,355.0,107.9,355.0,104.0z" stroke-width="1" fill-rule="nonzero" fill="#fdc55b" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="131.5" y="23.0">切换main_state</tspan><tspan x="4.0" y="42.0">调用main_state_transition()函数</tspan><tspan x="4.0" y="61.0">1）若_status_flags.condition_auto_mission_available：</tspan><tspan x="4.0" y="80.0">MAIN_STATE_AUTO_MISSION</tspan><tspan x="4.0" y="99.0">2）否则：MAIN_STATE_AUTO_LOITER</tspan></text></g><g id="shape9" transform="translate(1111.020000,2025.201000)"><path stroke-width="1" d="M.0,.0L.0,31.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,31.0L.0,37.0L-3.0,31.0L3.0,31.0" fill="#191919" stroke="#191919"/></g><g id="shape10" transform="translate(536.520000,1246.201000)"><path d="M388.0,85.0L388.0,7.0C388.0,3.1,384.9,.0,381.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L381.0,92.0C384.9,92.0,388.0,88.9,388.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#fdc55b" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="122.5" y="42.0">无人机控制指令是否更新</tspan><tspan x="132.5" y="61.0">_cmd_sub.updated()</tspan></text></g><g id="shape11" transform="translate(924.520000,1292.201000)"><path stroke-width="1" d="M.0,.0C41.5,-0.0,83.0,-0.0,117.5,1.9C151.9,3.9,179.4,7.9,193.1,12.9C203.1,16.6,205.7,20.8,206.3,25.2" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M209.3,23.9L206.5,30.0L203.3,24.1L209.3,23.9" fill="#191919" stroke="#191919"/></g><g id="shape12" transform="translate(730.520000,1338.201000)"><path stroke-width="1" d="M.0,.0L.0,68.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,68.0L.0,74.0L-3.0,68.0L3.0,68.0" fill="#191919" stroke="#191919"/></g><g id="shape13" transform="translate(730.520000,1504.701000)"><path stroke-width="1" d="M.0,.0L.0,209.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,209.0L.0,215.0L-3.0,209.0L3.0,209.0" fill="#191919" stroke="#191919"/></g><g id="shape14" transform="translate(1024.520000,1524.701000)"><path d="M213.0,104.0L213.0,7.0C213.0,3.1,209.9,.0,206.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,104.0C.0,107.9,3.1,111.0,7.0,111.0L206.0,111.0C209.9,111.0,213.0,107.9,213.0,104.0z" stroke-width="1" fill-rule="nonzero" fill="#fdc55b" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="48.0" y="32.5">更新控制模式并发布</tspan><tspan x="35.5" y="51.5">update_control_mode()</tspan><tspan x="5.0" y="70.5">_control_mode_pub.publish(_vehi</tspan><tspan x="50.5" y="89.5">cle_control_mode)</tspan></text></g><g id="shape15" transform="translate(924.520000,1458.701000)"><path stroke-width="1" d="M.0,.0C41.5,-0.0,83.0,-0.1,117.5,4.3C151.9,8.6,179.4,17.4,193.1,28.5C205.0,38.1,206.5,49.4,206.5,60.9" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M209.5,60.0L206.5,66.0L203.5,60.0L209.5,60.0" fill="#191919" stroke="#191919"/></g><g id="shape16" transform="translate(1131.020000,1635.701000)"><path stroke-width="1" d="M.0,.0C.0,1.9,.0,3.9,.0,8.8C.0,13.6,.0,21.4,.0,26.3C.0,27.9,.0,29.2,.0,30.3" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,29.0L.0,35.0L-3.0,29.0L3.0,29.0" fill="#191919" stroke="#191919"/></g><g id="shape17" transform="translate(578.520000,1109.201000)"><path d="M304.0,85.0L304.0,7.0C304.0,3.1,300.9,.0,297.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L297.0,92.0C300.9,92.0,304.0,88.9,304.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#fdff85" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="47.5" y="42.0">handle_message_command_long()</tspan><tspan x="56.5" y="61.0">发布ORB_ID(vehicle_command)</tspan></text></g></g></svg>
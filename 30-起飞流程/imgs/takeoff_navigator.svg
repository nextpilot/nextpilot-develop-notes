<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1118 950" height="950" xmlns:xlink="http://www.w3.org/1999/xlink" width="1118"><defs/><g transform="translate(-1461.02,-1250.70)"><g id="shape1" transform="translate(1807.520000,1360.701000)"><path d="M304.0,85.0L304.0,7.0C304.0,3.1,300.9,.0,297.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L297.0,92.0C300.9,92.0,304.0,88.9,304.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#50ad76" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="87.0" y="42.0">主线程处理：控制指令</tspan><tspan x="108.0" y="61.0">设置起飞triplet</tspan></text></g><g id="shape2" transform="translate(1807.520000,1492.701000)"><path d="M304.0,85.0L304.0,7.0C304.0,3.1,300.9,.0,297.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L297.0,92.0C300.9,92.0,304.0,88.9,304.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#50ad76" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="113.0" y="43.0">主线程处理：</tspan><tspan x="75.0" y="60.0" style="font-size:9.00pt">订阅ORB_ID(vehicle_status)</tspan></text></g><g id="shape3" transform="translate(1807.520000,1624.701000)"><path d="M304.0,85.0L304.0,7.0C304.0,3.1,300.9,.0,297.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L297.0,92.0C300.9,92.0,304.0,88.9,304.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#50ad76" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="22.0" y="42.0">根据NAVIGATION_STATE_AUTO_TAKEOFF</tspan><tspan x="84.5" y="61.0">设置导航模式为takeoff</tspan></text></g><g id="shape4" transform="translate(2157.520000,1727.201000)"><path d="M189.0,85.0L189.0,7.0C189.0,3.1,185.9,.0,182.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L182.0,92.0C185.9,92.0,189.0,88.9,189.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#90d6ab" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="16.5" y="32.5">激活takeooff模式（初次进</tspan><tspan x="81.5" y="51.5">入）</tspan><tspan x="49.5" y="70.5">on_activation()</tspan></text></g><g id="shape5" transform="translate(1675.020000,1458.701000)"><path stroke-dasharray="11,5,2.5,5" stroke-width="1" d="M.0,.0C16.3,1.3,32.6,2.6,46.5,15.3C60.4,28.0,72.1,52.0,86.0,64.7C98.3,75.9,112.5,78.2,126.9,79.5" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M126.8,76.5L132.5,80.0L126.3,82.5L126.8,76.5" fill="#191919" stroke="#191919"/></g><g id="shape6" transform="translate(1959.520000,1452.701000)"><path stroke-width="1" d="M.0,.0L.0,34.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,34.0L.0,40.0L-3.0,34.0L3.0,34.0" fill="#191919" stroke="#191919"/></g><g id="shape7" transform="translate(1959.520000,1584.701000)"><path stroke-width="1" d="M.0,.0L.0,34.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,34.0L.0,40.0L-3.0,34.0L3.0,34.0" fill="#191919" stroke="#191919"/></g><g id="shape8" transform="translate(2111.520000,1670.701000)"><path stroke-width="1" d="M.0,.0C28.2,-0.0,56.4,-0.1,79.9,3.7C103.4,7.4,122.1,14.9,131.4,24.4C139.2,32.2,140.4,41.4,140.5,50.9" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M143.5,50.5L140.5,56.5L137.5,50.5L143.5,50.5" fill="#191919" stroke="#191919"/></g><g id="shape9" transform="translate(2157.520000,1858.201000)"><path d="M189.0,85.0L189.0,7.0C189.0,3.1,185.9,.0,182.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L182.0,92.0C185.9,92.0,189.0,88.9,189.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#90d6ab" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="7.5" y="42.0">处于takeoff模式（一直调用）</tspan><tspan x="49.5" y="61.0">on_activation()</tspan></text></g><g id="shape10" transform="translate(2252.020000,1819.201000)"><path stroke-width="1" d="M.0,.0L.0,33.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,33.0L.0,39.0L-3.0,33.0L3.0,33.0" fill="#191919" stroke="#191919"/></g><g id="shape11" transform="translate(2331.520000,1973.701000)"><path d="M246.0,85.0L246.0,7.0C246.0,3.1,242.9,.0,239.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L239.0,92.0C242.9,92.0,246.0,88.9,246.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#90d6ab" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="16.5" y="42.0">航点到达判断，到达后设置loiter航点</tspan><tspan x="27.0" y="61.0">set_loiter_item(&amp;_mission_item)</tspan></text></g><g id="shape12" transform="translate(2346.520000,1904.201000)"><path stroke-width="1" d="M.0,.0C21.7,-0.0,43.4,-0.1,61.4,4.5C79.5,9.1,93.8,18.4,101.0,30.0C107.3,40.2,108.0,52.2,108.0,64.4" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M111.0,63.5L108.0,69.5L105.0,63.5L111.0,63.5" fill="#191919" stroke="#191919"/></g><g id="shape13" transform="translate(2331.520000,2107.701000)"><path d="M246.0,85.0L246.0,7.0C246.0,3.1,242.9,.0,239.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L239.0,92.0C242.9,92.0,246.0,88.9,246.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#90d6ab" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="56.5" y="23.0">设置triplets可发布标志</tspan><tspan x="88.0" y="42.0">_navigator-</tspan><tspan x="4.0" y="61.0">>set_position_setpoint_triplet_updated</tspan><tspan x="119.0" y="80.0">()</tspan></text></g><g id="shape14" transform="translate(2417.520000,1801.701000)"><path d="M160.0,85.0L160.0,7.0C160.0,3.1,156.9,.0,153.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L153.0,92.0C156.9,92.0,160.0,88.9,160.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#90d6ab" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="32.0" y="42.0">设置takeoff航点</tspan><tspan x="14.5" y="61.0">set_takeoff_position()</tspan></text></g><g id="shape15" transform="translate(2454.520000,2065.701000)"><path stroke-width="1" d="M.0,.0L.0,36.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,36.0L.0,42.0L-3.0,36.0L3.0,36.0" fill="#191919" stroke="#191919"/></g><g id="shape16" transform="translate(1807.000000,2031.701000)"><path d="M304.0,85.0L304.0,7.0C304.0,3.1,300.9,.0,297.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L297.0,92.0C300.9,92.0,304.0,88.9,304.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#50ad76" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="118.0" y="42.0">发布triplets</tspan><tspan x="48.0" y="61.0">publish_position_setpoint_triplet();</tspan></text></g><g id="shape17" transform="translate(1909.520000,1904.263500)"><path d="M50.0,71.9L100.0,35.9L50.0,.0L.0,35.9L50.0,71.9z" stroke-width="1" fill-rule="nonzero" fill="#62bc85" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="24.0" y="31.9">检查是否</tspan><tspan x="30.5" y="50.9">可发布</tspan></text></g><g id="shape18" transform="translate(2346.520000,1773.201000)"><path stroke-width="1" d="M.0,.0C30.3,-0.0,60.7,-0.0,85.9,1.8C111.1,3.7,131.2,7.5,141.2,12.3C148.6,15.8,150.5,19.8,150.9,24.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M153.9,22.4L151.0,28.5L147.9,22.6L153.9,22.4" fill="#191919" stroke="#191919"/></g><g id="shape19" transform="translate(1959.520000,1976.138500)"><path stroke-width="1" d="M.0,.0L.0,48.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,48.0L.0,54.0L-3.0,48.0L3.0,48.0" fill="#191919" stroke="#191919"/><rect x="-5.5" height="19.0" width="13.0" fill="#ffffff" y="17.5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-5.5" y="32.5">是</tspan></text></g><g id="shape20" transform="translate(1807.000000,1756.701000)"><path d="M304.0,85.0L304.0,7.0C304.0,3.1,300.9,.0,297.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L297.0,92.0C300.9,92.0,304.0,88.9,304.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#50ad76" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="93.5" y="23.0">遍历所有模式并运行</tspan><tspan x="69.5" y="42.0">_navigation_mode_array[i]-</tspan><tspan x="67.0" y="61.0">>run(_navigation_mode == </tspan><tspan x="70.5" y="80.0">_navigation_mode_array[i])</tspan></text></g><g id="shape21" transform="translate(1959.520000,1716.701000)"><path stroke-width="1" d="M.0,.0L.0,34.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,34.0L.0,40.0L-3.0,34.0L3.0,34.0" fill="#191919" stroke="#191919"/></g><g id="shape22" transform="translate(1959.000000,1848.701000)"><path stroke-width="1" d="M.0,.0L.0,50.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M3.0,50.0L.0,56.0L-3.0,50.0L3.0,50.0" fill="#191919" stroke="#191919"/></g><g id="shape23" transform="translate(2331.520000,2153.701000)"><path stroke-width="1" d="M.0,.0C-39.6,-3.5,-79.1,-7.0,-113.0,-40.8C-146.9,-74.7,-175.1,-138.8,-209.0,-172.7C-241.3,-204.9,-278.8,-209.6,-316.5,-213.0" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M-316.3,-210.0L-322.0,-213.5L-315.8,-216.0L-316.3,-210.0" fill="#191919" stroke="#191919"/></g><g id="shape24" transform="translate(1462.020000,1251.701000)"><path d="M236.5,85.0L236.5,7.0C236.5,3.1,233.4,.0,229.5,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L229.5,92.0C233.4,92.0,236.5,88.9,236.5,85.0z" stroke-width="1" fill-rule="nonzero" fill="#fdff85" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="4.3" y="32.5">Mavlink</tspan><tspan x="13.8" y="51.5">handle_message_command_long()</tspan><tspan x="22.8" y="70.5">发布ORB_ID(vehicle_command)</tspan></text></g><g id="shape25" transform="translate(1698.520000,1297.701000)"><path stroke-dasharray="11,5,2.5,5" stroke-width="1" d="M.0,.0C13.4,1.8,26.8,3.6,38.3,20.9C49.7,38.1,59.3,70.9,70.7,88.1C80.9,103.4,92.4,106.6,104.2,108.3" fill="none" stroke="#191919"/><path stroke-linecap="round" stroke-width="1" d="M103.5,105.2L109.0,109.0L102.6,111.1L103.5,105.2" fill="#191919" stroke="#191919"/></g><g id="shape26" transform="translate(1462.020000,1412.701000)"><path d="M213.0,85.0L213.0,7.0C213.0,3.1,209.9,.0,206.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,85.0C.0,88.9,3.1,92.0,7.0,92.0L206.0,92.0C209.9,92.0,213.0,88.9,213.0,85.0z" stroke-width="1" fill-rule="nonzero" fill="#fdc55b" stroke="#101843"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="4.0" y="32.5">Commander</tspan><tspan x="23.5" y="51.5">发布ORB_ID(vehicle_status)</tspan><tspan x="21.0" y="70.5">_status_pub.publish(_status)</tspan></text></g></g></svg>